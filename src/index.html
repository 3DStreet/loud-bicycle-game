<html>
  <head>
    <title>Loud Bicycle Game</title>
    <style>
      #shout, #horn {
        position: absolute;
        top: 0;
        height: 150px;
        width: 150px;
        border: 2px solid green;
      }
      #horn.disabled {
        border: 2px solid red;
      }
      #shout.disabled {
        border: 2px solid red;
      }
      #shout-meter, #horn-meter {
        position: absolute;
        top: 200px;
        width: 150px;
      }
      .high-meter {
        accent-color: green;
      }
      .low-meter {
        accent-color: coral;
      }

      #horn, #horn-meter {
        left: 150px;
      }

      #game-state-header {
        position: absolute;
        top: 0;
        right: 0;
        font-size: larger;
      }

      #life-indicator-container {
        position: absolute;
        left: 5;
        bottom: 5;
      }

      .life-indicator {
        width: 50px;
        height: 50px;
        background-color: green;
        border-radius: 50px;
        border: 10px solid black;
        margin-top: 5px;
      }

    </style>
  </head>
  <body>
    <a-scene pool__interactable="container: #level; mixin: interactable-mixin; size: 10">
      <a-assets>
        <a-mixin id="interactable-mixin" interactable color="#4CC3D9" geometry="primitive: box; width: 1; height: 1; depth: 1"></a-mixin>
      </a-assets>
      <a-camera position="0 5 2" rotation="-55 0 0" wasd-controls-enabled="false" look-controls-enabled="false" fov="90"></a-camera>

      <a-sphere position="0 0.5 0" scale="0.5 0.5 0.5" color="green" player-controller="speed: 2.0" aabb-collider="objects:[interactable]">
        <a-sphere id="noise-indicator" aabb-collider="objects:[interactable]" material="transparent: true; opacity: 0.4" visible="false" noise-indicator scale="4 1 4"></a-sphere>
      </a-sphere>

      <a-entity id="interactable-spawner" interactable-pool></a-entity>
      <a-entity id="game-manager" game-manager></a-entity>
      <a-entity noise-meter="clickerId:shout; meterId:shout-meter; isSmall:true; keyCode:q"></a-entity>
      <a-entity noise-meter="clickerId:horn; meterId:horn-meter; isSmall:false; keyCode:e"></a-entity>

      <a-entity id="level" animation="property: position; to: 0 0 400; autoplay: false; dur: 100000; easing: linear; loop: false">
        <a-plane id="mid-lane" position="0 0 -10" rotation="-90 0 0" scale="2 800 1" color="grey"></a-plane>
        <a-plane id="right-lane" position="2.5 0 -10" rotation="-90 0 0" scale="2 800 1" color="grey"></a-plane>
        <a-plane id="left-lane" position="-2.5 0 -10" rotation="-90 0 0" scale="2 800 1" color="grey"></a-plane>
      </a-entity>
      
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
    <img id="shout" height="200" width="200" src="./assets/shout.jpg" >
    <img id="horn" height="200" width="200" src="./assets/bicycle-horn.jpg" >
    <progress id="shout-meter" class="high-meter" value="0" max="100"></progress>
    <progress id="horn-meter" class="high-meter" value="0" max="100"></progress>
    <p id="game-state-header">Loading</p>
    <div id="life-indicator-container">
      <div class="life-indicator"></div>
      <div class="life-indicator"></div>
      <div class="life-indicator"></div>
    </div>
  </body>
</html>